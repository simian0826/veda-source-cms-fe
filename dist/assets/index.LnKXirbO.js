import{d as C,i as F,r as _,o as A,ai as B,b as d,c as b,e as p,f as t,w as s,g as a,N,ae as E,j as H,I,af as L,n as T,B as V,m as j,S as q,q as k,_ as P}from"./index.CufdW7Ea.js";import{e as z,A as M,f as O}from"./index.BS-UClvJ.js";import{a as D,F as f}from"./index.Cwa5fk01.js";import{C as G,U as J}from"./index.CWQINlvw.js";import{P as K}from"./PlusOutlined.Bnid4_sW.js";import"./collapseMotion.DVVzCguf.js";import"./index.CUhS0zuH.js";import"./DownloadOutlined.BOOwgzgl.js";const Q=p("div",{class:"font-size-[20px] mb-4"},"HeroSection Configuration",-1),R={class:"p-4 bg-white flex w-full"},W={key:0},X=p("div",{style:{"margin-top":"8px"}},"Upload",-1),Y={class:"w-full flex justify-end"},Z=C({__name:"index",setup($){const w={Authorization:F().getToken},e=_(),u=_(!1),i=_({}),S=(o,c)=>{var r,y;console.log(o);const{file:l,fileList:n}=o;if(l.status==="done"||l.status==="removed"){console.log(i.value);let m=(r=e.value)==null?void 0:r.find(v=>v.module===c);m&&((y=e.value)==null||y.forEach((v,U)=>{v.module===c&&e.value&&(e.value[U].background="",n.length>0&&n.forEach(h=>{let g="";h.url?g=h.url:g=h.response.data[0].url,m.background=g}),e.value[U]=m)}))}};A(async()=>{try{u.value=!0;const o=await z();o&&(e.value=o,e.value.length>0&&e.value.forEach(c=>{i.value[c.module]=B(c.background)}),console.log(i.value),u.value=!1)}catch(o){console.error("getHeroSections error",o)}finally{u.value=!1}});const x=async()=>{if(e.value){console.log(e.value,"form data ");try{u.value=!0,await O(e.value)&&k.success("Update successfully")}catch(o){k.error("Update failed")}finally{u.value=!1}}};return(o,c)=>(d(),b("div",null,[Q,p("div",R,[t(a(q),{wrapperClassName:"w-full",spinning:u.value},{default:s(()=>[t(a(D),{name:"basic",class:"w-full p-4","label-col":{style:{width:"150px"}},model:e.value,onFinish:x},{default:s(()=>[(d(!0),b(N,null,E(e.value,(l,n)=>(d(),H(a(G),{key:n,class:"mb-4 px-0 pb-0",title:l.module},{default:s(()=>[t(a(f),{name:[n,"header"],label:"header",rules:[{required:!0,message:"header can not be empty",trigger:["blur","change"]}]},{default:s(()=>[t(a(I),{value:l.header,"onUpdate:value":r=>l.header=r},null,8,["value","onUpdate:value"])]),_:2},1032,["name"]),t(a(f),{name:[n,"content"],label:"content",rules:[{required:!0,message:"content can not be empty",trigger:["blur","change"]}]},{default:s(()=>[t(a(L),{value:l.content,"onUpdate:value":r=>l.content=r,placeholder:"please enter"},null,8,["value","onUpdate:value"])]),_:2},1032,["name"]),t(a(f),{label:"hero background",name:[n,"background"]},{default:s(()=>[t(a(J),{headers:w,"file-list":i.value[l.module],"onUpdate:fileList":r=>i.value[l.module]=r,action:a(M).AntUpload,onChange:r=>{S(r,l.module)},"list-type":"picture-card"},{default:s(()=>[l.background.length===0?(d(),b("div",W,[t(a(K)),X])):T("",!0)]),_:2},1032,["file-list","onUpdate:fileList","action","onChange"])]),_:2},1032,["name"])]),_:2},1032,["title"]))),128)),t(a(f),null,{default:s(()=>[p("div",Y,[t(a(V),{type:"primary","html-type":"submit"},{default:s(()=>[j("Submit")]),_:1})])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])]))}}),ce=P(Z,[["__file","E:/deloitte_project/bruno/cms-front-end/src/views/hero/index.vue"]]);export{ce as default};
