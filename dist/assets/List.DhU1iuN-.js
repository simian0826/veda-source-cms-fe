import{d as S,an as D,r as u,l as j,b as r,c as d,e as l,f as s,g as o,ah as A,w as i,m as v,ao as B,B as f,N as E,ae as q,n as I,S as T,p as V,M as $,E as M,q as C,_ as O}from"./index.CufdW7Ea.js";import{d as F,g as H,a as R}from"./index.Ok0vt2Xa.js";import{P as W}from"./PlusCircleOutlined.CT9MWEMc.js";import{T as G}from"./index.-czvmPT5.js";import"./collapseMotion.DVVzCguf.js";import"./css.BdeePvfe.js";import"./index.auR0hyqw.js";import"./FolderOutlined.DVlOC6Q_.js";import"./index.CUhS0zuH.js";const J=l("div",{class:"font-size-[20px] mb-4"},"Product List",-1),K={class:"bg-white p-4"},Q={class:"mb-4 flex justify-between"},U=l("span",null,[l("strong",null,"category:")],-1),X={key:0,class:"flex flex-justify-start"},Y=["src"],Z={key:1},ee={class:"flex justify-end mt-2"},te=S({__name:"List",setup(ae){const _=D(),y=u(!1),n=u([{label:"All",value:""}]),p=u(),e=u({page:1,pageSize:10,total:0}),x=[{title:"Name",dataIndex:"name",key:"name",width:250},{title:"Category",dataIndex:"category",width:250},{title:"Product Images",key:"images",dataIndex:"imgs"},{title:"Action",key:"action",width:250}],h=u(),w=(t,a)=>{_.push({path:"/product/detail",query:{id:t,mode:a}})},b=()=>{_.push({path:"/product/detail",query:{mode:"add"}})},z=t=>{$.confirm({title:"Warning?",icon:s(M),content:"Are you sure you want to delete this product?",onOk:async()=>{await F(Number(t))?(C.success("Delete product successfully"),g(!0)):C.error("Delete product failed")},onCancel(){}})},N=(t,a)=>{e.value.page=t,e.value.pageSize=a,g()},g=async(t=!1)=>{t&&(e.value.page=1,h.value=[],e.value.total=0,e.value.pageSize=10);try{y.value=!0;const a=await H({category:p.value,page:e.value.page,pageSize:e.value.pageSize});a.list.length>0&&h.value.push(...a.list),e.value.total=a.total,e.value.page++}finally{y.value=!1}},P=async()=>{const t=await R();n.value=[...n.value,...t]},L=t=>{p.value=t,g(!0)};return j(async()=>{await P(),n.value.length>0&&(p.value=n.value[0].value,g(!0))}),(t,a)=>(r(),d("div",null,[J,l("div",K,[l("div",Q,[l("div",null,[U,s(o(A),{value:p.value,options:n.value,class:"w-[200px] ml-4",onChange:L},null,8,["value","options"])]),s(o(f),{type:"primary",onClick:b,icon:B(o(W))},{default:i(()=>[v(" New ")]),_:1},8,["icon"])]),s(o(T),{wrapperClassName:"w-full",spinning:y.value},{default:i(()=>[s(o(G),{columns:x,"row-key":"id","data-source":h.value,pagination:!1},{bodyCell:i(({column:k,record:m})=>[k.key==="images"?(r(),d("div",X,[(r(!0),d(E,null,q(m.imgs,c=>(r(),d("img",{class:"w-[100px] mr-4",src:c,key:c},null,8,Y))),128))])):k.key==="action"?(r(),d("div",Z,[s(o(f),{type:"link",onClick:c=>w(m.id,"detail")},{default:i(()=>[v(" Detail ")]),_:2},1032,["onClick"]),s(o(f),{type:"link",onClick:c=>w(m.id,"edit")},{default:i(()=>[v(" Edit ")]),_:2},1032,["onClick"]),s(o(f),{type:"link",onClick:c=>z(m.id)},{default:i(()=>[v(" Delete ")]),_:2},1032,["onClick"])])):I("",!0)]),_:1},8,["data-source"])]),_:1},8,["spinning"]),l("div",ee,[s(o(V),{total:e.value.total,"show-total":()=>"total ".concat(e.value.total," items"),"show-size-changer":"","show-quick-jumper":"",current:e.value.page,"page-size":e.value.pageSize,onChange:N},null,8,["total","show-total","current","page-size"])])])]))}}),pe=O(te,[["__file","E:/deloitte_project/bruno/cms-front-end/src/views/product/List.vue"]]);export{pe as default};
