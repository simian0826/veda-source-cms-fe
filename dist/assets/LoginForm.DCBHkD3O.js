import{d as I,I as f,bJ as O,i as S,r as p,x as E,F as N,g as e,b as h,c as k,b4 as g,b5 as w,f as s,w as a,B as U,m as C,cX as B,N as T,b9 as D,d2 as G,_ as K}from"./index.CvwKKGt-.js";import{u as V,a as M,c as P,L as W,b as $}from"./LoginFormTitle.BFaMZmYs.js";import{a as v}from"./index.BDn7RwAL.js";import{U as j,L as q}from"./UserOutlined.D_Iyv2iW.js";import"./collapseMotion.9KreEM77.js";const z=I({__name:"LoginForm",setup(J){const n=v.Item,_=f.Password,{notification:x,createErrorModal:y}=G(),{prefixCls:L}=O("login"),u=S(),{getLoginState:F}=V(),{getFormRules:R}=M(),i=p(),l=p(!1),t=E({account:"admin",password:"123456"}),{validForm:b}=P(i),d=N(()=>e(F)===W.LOGIN);async function m(){const r=await b();if(r)try{l.value=!0,await u.login(D({password:r.password,username:r.account,mode:"none"}))&&x.success({message:"LOGIN was successfully",description:"Welcome: ".concat(u.getUserInfo.username),duration:3})}catch(o){y({title:"ERROR",content:o.message||"NETWORK ERROR!",getContainer:()=>document.body.querySelector(".".concat(L))||document.body})}finally{l.value=!1}}return(r,o)=>(h(),k(T,null,[g(s($,{class:"enter-x"},null,512),[[w,d.value]]),g(s(e(v),{class:"p-4 enter-x",model:t,rules:e(R),ref_key:"formRef",ref:i,onKeypress:B(m,["enter"])},{default:a(()=>[s(e(n),{name:"account",class:"enter-x"},{default:a(()=>[s(e(f),{value:t.account,"onUpdate:value":o[0]||(o[0]=c=>t.account=c),placeholder:"account",class:"fix-auto-fill"},{prefix:a(()=>[s(e(j))]),_:1},8,["value"])]),_:1}),s(e(n),{name:"password",class:"enter-x"},{default:a(()=>[s(e(_),{visibilityToggle:"",value:t.password,"onUpdate:value":o[1]||(o[1]=c=>t.password=c),placeholder:"password"},{prefix:a(()=>[s(e(q))]),_:1},8,["value"])]),_:1}),s(e(n),{class:"enter-x"},{default:a(()=>[s(e(U),{type:"primary",size:"large",block:"",onClick:m,loading:l.value},{default:a(()=>[C(" LOGIN ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),[[w,d.value]])],64))}}),Z=K(z,[["__file","E:/deloitte_project/bruno/cms-front-end/src/views/sys/login/LoginForm.vue"]]);export{Z as default};
